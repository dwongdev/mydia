apiVersion: v1
kind: ConfigMap
metadata:
  name: metadata-relay-config
  namespace: metadata-relay
  labels:
    app.kubernetes.io/name: metadata-relay
    app.kubernetes.io/component: relay-service
data:
  # Application configuration
  PORT: "4001"
  PHX_HOST: "relay.mydia.dev"
  MIX_ENV: "prod"

  # Database configuration
  SQLITE_DB_PATH: "/data/metadata_relay.db"

  # Redis cache for distributed/persistent caching
  REDIS_URL: "redis://redis:6379"

  # Integrated TURN Server Configuration
  # The integrated TURN server provides STUN/TURN for WebRTC NAT traversal
  TURN_ENABLED: "true"
  TURN_PORT: "3478"
  TURN_REALM: "relay.mydia.dev"
  TURN_MIN_PORT: "49152"
  TURN_MAX_PORT: "49252"
  # TURN_PUBLIC_IP is set via env in deployment.yaml using status.hostIP
