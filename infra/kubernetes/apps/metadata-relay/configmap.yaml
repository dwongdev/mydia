apiVersion: v1
kind: ConfigMap
metadata:
  name: metadata-relay-config
  namespace: metadata-relay
  labels:
    app.kubernetes.io/name: metadata-relay
    app.kubernetes.io/component: relay-service
data:
  # Application configuration
  PORT: "4000"
  PHX_HOST: "relay.mydia.dev"
  MIX_ENV: "prod"

  # Database configuration
  SQLITE_DB_PATH: "/data/metadata_relay.db"

  # Redis cache for distributed/persistent caching
  REDIS_URL: "redis://redis:6379"

  # Libp2p Relay Server Configuration
  # Replaces legacy TURN server for NAT traversal and signaling
  LIBP2P_RELAY_ENABLED: "true"
  LIBP2P_PORT: "4001"
  # External hostname for libp2p (DNS-only record, not proxied by Cloudflare)
  LIBP2P_EXTERNAL_HOST: "p2p.mydia.dev"
